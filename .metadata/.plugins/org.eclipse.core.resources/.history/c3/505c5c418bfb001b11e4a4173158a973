<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.side_on.dao.RecruitDao">

 	<!--1. 모집 게시글 등록하기-->
	<insert id="insertRecruitBoard" parameterType="com.side_on.dto.RecruitBoard">
		insert into Recruit
		values(Recruit_SEQ.nextval, #{memberId}, #{hit}, #{start_date}, #{end_date}, #{title}, #{content},
		#{save_date}, #{pay_check}, #{pay_amount}, #{visible_check}, #{simple_info}, #{pj_content},
		#{project_name}, #{Front}, #{Back}, #{aos}, #{ios}, #{uxui}, #{plan}, #{pm})
	</insert>
	
		<!--2. 게시글 총 갯수 -->
		<select id="allCount" resultType="int">
			        SELECT count(*)
			        FROM Recruit
		</select>
		<!--3. 게시글 페이징 -->
		 <select id="recruitList" resultType="hashmap" parameterType="hashmap">
			        <![CDATA[
						SELECT COUNT(Recruit_num)
						  FROM Recruit
						 WHERE Recruit_num > 0
					]]>
		</select>
	
		<!-- 왜 안되지 -->
		<select id="recruitListPage" resultType="com.side_on.dto.RecruitBoard" parameterType="com.side_on.dto.Criteria_ex">
			SELECT  Recruit_num, 
			        title, 
			        memberId
			 FROM ( 
			        SELECT Recruit_num, 
			               title, 
			               CONTENT, 
			               memberId, 
			               ROW_NUMBER() OVER(ORDER BY Recruit_num DESC) AS RNUM
			         FROM Recruit 
			                       ) Recruit
			WHERE RNUM BETWEEN #{rowStart} AND #{rowEnd}
			ORDER BY Recruit_num DESC
		</select>

		<select id="listCount" resultType="int">
		<![CDATA[
			SELECT COUNT(BNO)
			  FROM MP_BOARD
			 WHERE BNO > 0
		]]>
		</select>
	
</mapper>