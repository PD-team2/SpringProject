package com.side_on.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.multipart.MultipartHttpServletRequest;

import com.side_on.dao.RecruitDao;
import com.side_on.dto.RecruitBoard;
import com.side_on.util.Utility;
import lombok.extern.slf4j.Slf4j;

@Controller
@Slf4j
public class RecruitController {
	
	//Service 연결
	@Autowired
	private RecruitDao service;
	
	/** 모집 페이지 첫 화면 */
	@RequestMapping("/recruit/recruitHome")
	public String recruitHome() {
		
		return "recruit/recruitHome"; 
	}
	
	/** 모집 페이지 상세 페이지 */
	@RequestMapping("/recruit/recruitDetail")
	public String recruitDetail() {
		
		return "recruit/recruitDetail"; 
	}
	
	/** 모집 페이지 글 쓰기 */
	@RequestMapping("/recruit/recruitWrite")
	public String recruitWrite() {
		
		return "recruit/recruitWrite"; 
	}
	
	/** 마이페이지 모집현황 보기 */
	@RequestMapping("/recruit/recruitMypage")
	public String recruitMypage() {
		
		return "recruit/recruitMypage"; 
	}
	
	/** 마이페이지 지원현황 보기 */
	@RequestMapping("/recruit/recruitMypage2")
	public String recruitMypage2() {
		
		return "recruit/recruitMypage2"; 
	}
	
	/** 관리자 페이지 recruitAdmin*/
	@RequestMapping("/recruit/recruitAdmin")
	public String recruitAdmin() {
		
		return "recruit/recruitAdmin"; 
	}
	
	/** 모집 페이지 글 작성 DB 저장 
	 * @throws Exception */
	@RequestMapping("/recruit/write/complete")
	public String recruitWriteComplete(RecruitBoard recruitBoard, MultipartHttpServletRequest mpRequest) throws Exception {
		System.out.println("컨트롤러 입니당" + recruitBoard);
		System.out.println("컨트롤러 입니당" + mpRequest);
		
		//날짜 저장getCurrentDate
		recruitBoard.setSave_date(Utility.getCurrentDate());
		recruitBoard.setProfile("a.png");
		recruitBoard.setMemberId("user01");
		recruitBoard.setHit(0);
		
		service.recruitWrite(recruitBoard, mpRequest);
		
		
		return "recruit/recruitAdmin"; 
	}
	
}

